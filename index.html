<!doctype html>
<html lang="ko">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Í≥ºÏ†úÍπ®Í∏∞</title>
<style>
  :root { --w:1100px; --h:680px; }
  body{margin:0;background:#f1f3f7;color:#111;font:16px/1.4 system-ui,Apple SD Gothic Neo,Pretendard,sans-serif;
       display:flex;flex-direction:column;align-items:center;text-align:center}
  h2{margin:14px 0 6px}
  #hud{margin:0 0 6px}
  .wrap{width:min(100%, var(--w));}
  canvas{width:100%; height:calc(100% * (var(--h) / var(--w))); background:#fff;border:1px solid #c9d2e0}
  #msg{margin-top:8px;white-space:pre;text-align:center;color:#333}
</style>
<body>
  <h2>Í≥ºÏ†úÍπ®Í∏∞ <br>(‚Üê/‚Üí Ïù¥Îèô, Space Î∞úÏÇ¨/Ïû¨ÏãúÏûë)</h2>
  <div id="hud">Ï†êÏàò: <b id="score">0</b> ¬∑ Î™©Ïà®: <b id="lives">3</b></div>
  <div class="wrap">
    <canvas id="cv" width="1100" height="680"></canvas>
  </div>
  <div id="msg">Space Î°ú ÏãúÏûë</div>

<script>
(() => {
  const rowTexts = [
    " .,  ., Í≥ºÏ†úÏïÑÏπ¥Ïù¥Î∏å,  ., w3school, CSStutorial, htmlÍ∏∞Ï¥àÍ∞ïÏùò,  ., ÏóêÎîîÌÑ∞ÏÑ§Ïπò, ÍπÉÌóàÎ∏åÏÇ¨Ïö©Î≤ï, ., .",
    "., ., ., ., ., ., ., ., ., .",
    "1, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22101012, 3, Ïù¥Ïû¨ÏÑ±, gmail.com, github.com, ., 2Ï£ºÏ∞®-Ïù¥Ïû¨ÏÑ±,3Ï£ºÏ∞®-Ïù¥Ïû¨ÏÑ±,4Ï£ºÏ∞®-Ïù¥Ïû¨ÏÑ±,5Ï£ºÏ∞®-Ïù¥Ïû¨ÏÑ±,",
    "2, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 23101012,  3, ÍπÄÏÑúÏö∞,gmail.com, github.com, ., 2Ï£ºÏ∞®-ÍπÄÏÑúÏö∞,3Ï£ºÏ∞®-ÍπÄÏÑúÏö∞,4Ï£ºÏ∞®-ÍπÄÏÑúÏö∞,5Ï£ºÏ∞®-ÍπÄÏÑúÏö∞,",
    "3, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 24101012, 2, Î∞ïÌòÑÏßÄ, gmail.com, github.com, ., 2Ï£ºÏ∞®-Î∞ïÌòÑÏßÄ,3Ï£ºÏ∞®-Î∞ïÌòÑÏßÄ,4Ï£ºÏ∞®-Î∞ïÌòÑÏßÄ,5Ï£ºÏ∞®-Î∞ïÌòÑÏßÄ,",
    "4, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 21101012, 4, Ï†ÑÏäπÌò∏, gmail.com, github.com, ., 2Ï£ºÏ∞®-Ï†ÑÏäπÌò∏,3Ï£ºÏ∞®-Ï†ÑÏäπÌò∏,4Ï£ºÏ∞®-Ï†ÑÏäπÌò∏,5Ï£ºÏ∞®-Ï†ÑÏäπÌò∏,",
    "5, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22124231, 3, ÏµúÏßÄÏõê, gmail.com, github.com, ., 2Ï£ºÏ∞®-ÏµúÏßÄÏõê,3Ï£ºÏ∞®-ÏµúÏßÄÏõê,4Ï£ºÏ∞®-ÏµúÏßÄÏõê,5Ï£ºÏ∞®-ÏµúÏßÄÏõê,",
    "6, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22324012, 4, ÏûÑÏ†ïÏõê, gmail.com, github.com, ., 2Ï£ºÏ∞®-ÏûÑÏ†ïÏõê,3Ï£ºÏ∞®-ÏûÑÏ†ïÏõê,4Ï£ºÏ∞®-ÏûÑÏ†ïÏõê,5Ï£ºÏ∞®-ÏûÑÏ†ïÏõê,",
    "7, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22412012,  3, Î∞ïÏÑ±Ïö¥, gmail.com, github.com, .,2Ï£ºÏ∞®-Î∞ïÏÑ±Ïö¥,3Ï£ºÏ∞®-Î∞ïÏÑ±Ïö¥,4Ï£ºÏ∞®-Î∞ïÏÑ±Ïö¥,5Ï£ºÏ∞®-Î∞ïÏÑ±Ïö¥,",
    "8, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22101034,  2, ÏµúÏßÑÏö∞,gmail.com, github.com, ., 2Ï£ºÏ∞®-ÏµúÏßÑÏö∞,3Ï£ºÏ∞®-ÏµúÏßÑÏö∞,4Ï£ºÏ∞®-ÏµúÏßÑÏö∞,5Ï£ºÏ∞®-ÏµúÏßÑÏö∞,",
    "9, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22101986, 3, Î∞ïÌòÑÏÑù, gmail.com, github.com, ., 2Ï£ºÏ∞®-Î∞ïÌòÑÏÑù,3Ï£ºÏ∞®-Î∞ïÌòÑÏÑù,4Ï£ºÏ∞®-Î∞ïÌòÑÏÑù,5Ï£ºÏ∞®-Î∞ïÌòÑÏÑù,",
    "10, ÏãúÍ∞ÅÎîîÏûêÏù∏Ï†ÑÍ≥µ, 22102381, 3, ÍπÄÏÑúÏßÑ, gmail.com, github.com, .,2Ï£ºÏ∞®-ÍπÄÏÑúÏßÑ,3Ï£ºÏ∞®-ÍπÄÏÑúÏßÑ,4Ï£ºÏ∞®-ÍπÄÏÑúÏßÑ,5Ï£ºÏ∞®-ÍπÄÏÑúÏßÑ,"
  ];
  // =========================================

  const cv = document.getElementById('cv'), ct = cv.getContext('2d');
  const scoreEl = document.getElementById('score'), livesEl = document.getElementById('lives'), msg = document.getElementById('msg');

  // ÏãúÌä∏/Í∑∏Î¶¨Îìú
  const COLS = 12, ROWS = 12;
  const GAP=2, WALL_X=40, WALL_Y=90;
  const GRID_W = cv.width - WALL_X*2;
  const GRID_H = 380;
  const BRICK_W = Math.floor((GRID_W - GAP*(COLS-1)) / COLS);
  const BRICK_H = Math.floor((GRID_H - GAP*(ROWS-1)) / ROWS);


  const PADDLE_W=160, PADDLE_H=118, PADDLE_Y=cv.height-60;
  const BALL_R=8, BALL_SPEED=5.2; // ÎäêÎ¶∞ ÏÜçÎèÑ

  const paddleImg = new Image(); paddleImg.src='error.webp';
  let paddleReady=false; paddleImg.onload=()=>paddleReady=true;

  // ÏÉÅÌÉú
  let paddleX, left=false, right=false;
  let ballX, ballY, vx=0, vy=0, stuck=true;
  let score=0, lives=3, playing=false;
  const bricks=[]; // {x,y,alive,text}

  function initLevel(){
    bricks.length = 0;
    for(let r=0;r<ROWS;r++){
      const words = (rowTexts[r]||"").split(/,|\s+/).filter(Boolean); // ÏâºÌëú/Í≥µÎ∞± ÎëòÎã§ ÌóàÏö©
      for(let c=0;c<COLS;c++){
        const x = WALL_X + c*(BRICK_W+GAP);
        const y = WALL_Y + r*(BRICK_H+GAP);
        const text = words.length ? words[c % words.length] : "";
        bricks.push({x,y,alive:true,text});
      }
    }
  }

  function resetBall(){
    paddleX=(cv.width-PADDLE_W)/2;
    ballX=paddleX+PADDLE_W/2;
    ballY=PADDLE_Y-BALL_R-1;
    vx=0;vy=0;stuck=true;
  }

  function start(){
    if (playing) return;
    playing = true;
    msg.textContent = '';
    score = 0; lives = 3; scoreEl.textContent=0; livesEl.textContent=3;
    initLevel();
    resetBall();
    draw();
    requestAnimationFrame(loop);
  }

  function launch(){
    if (!stuck) return;
    const dir = ((ballX - (paddleX+PADDLE_W/2)) / (PADDLE_W/2));
    const angle = (-Math.PI/3) + (dir * Math.PI/6); // -60¬∞ ~ -20¬∞
    vx = BALL_SPEED * Math.cos(angle);
    vy = BALL_SPEED * Math.sin(angle);
    stuck = false;
  }

  function draw(){
    ct.clearRect(0,0,cv.width,cv.height);

    // ÏÖÄ(Î≤ΩÎèå)
    bricks.forEach(b=>{
      if(!b.alive) return;
      // Ï§ÑÎ¨¥Îä¨ ÎäêÎÇå
      ct.fillStyle = (Math.floor((b.y-WALL_Y)/(BRICK_H+GAP))%2===0) ? '#ffffff' : '#f7fafc';
      ct.fillRect(b.x,b.y,BRICK_W,BRICK_H);
      ct.strokeStyle='#d8e0ea';
      ct.strokeRect(b.x+0.5,b.y+0.5,BRICK_W-1,BRICK_H-1);
      // ÌÖçÏä§Ìä∏
      ct.fillStyle='#232b3a';
      ct.font = '11px system-ui';
      ct.textAlign='center'; ct.textBaseline='middle';
     
      let txt = b.text;
      if (ct.measureText(txt).width > BRICK_W-8){
        while (txt.length>0 && ct.measureText(txt+'‚Ä¶').width > BRICK_W-8) txt = txt.slice(0,-1);
        if (txt !== b.text) txt += '‚Ä¶';
      }
      ct.fillText(txt, b.x+BRICK_W/2, b.y+BRICK_H/2);
    });

    // Ìå®Îì§
    if (paddleReady) ct.drawImage(paddleImg, paddleX, PADDLE_Y, PADDLE_W, PADDLE_H);
    else { ct.fillStyle='#0ea5e9'; ct.fillRect(paddleX,PADDLE_Y,PADDLE_W,PADDLE_H); }

    // Í≥µ
    ct.beginPath(); ct.arc(ballX,ballY,BALL_R,0,Math.PI*2);
    ct.fillStyle='#ef4444'; ct.fill();
  }

  function paddleMove(){
    const speed=9;
    if(left)  paddleX -= speed;
    if(right) paddleX += speed;
    paddleX = Math.max(0, Math.min(cv.width-PADDLE_W, paddleX));
    if(stuck){ ballX=paddleX+PADDLE_W/2; ballY=PADDLE_Y-BALL_R-1; }
  }

  function collideWalls(){
    if(ballX-BALL_R<0){ ballX=BALL_R; vx*=-1; }
    if(ballX+BALL_R>cv.width){ ballX=cv.width-BALL_R; vx*=-1; }
    if(ballY-BALL_R<0){ ballY=BALL_R; vy*=-1; }
    if(ballY-BALL_R>cv.height){
      lives--; livesEl.textContent=lives;
      if(lives<=0){ gameOver(false); } else { resetBall(); }
    }
  }

  function collidePaddle(){
    if(ballY+BALL_R>=PADDLE_Y &&
       ballX>=paddleX && ballX<=paddleX+PADDLE_W &&
       vy>0){
      ballY=PADDLE_Y-BALL_R;
      const hit=(ballX-(paddleX+PADDLE_W/2))/(PADDLE_W/2);
      const angle=(-Math.PI/3)+(hit*Math.PI/3); // -60¬∞~+60¬∞
      const speed=Math.hypot(vx,vy);
      vx=speed*Math.sin(angle);
      vy=-Math.abs(speed*Math.cos(angle));
    }
  }

  function collideBricks(){
    for (const b of bricks){
      if(!b.alive) continue;
      if(ballX+BALL_R<b.x || ballX-BALL_R>b.x+BRICK_W ||
         ballY+BALL_R<b.y || ballY-BALL_R>b.y+BRICK_H) continue;

      // Í∞ÑÎã® Î∞òÏÇ¨
      vy *= -1;
      b.alive = false;
      score += 10; scoreEl.textContent = score;
      if (bricks.every(x=>!x.alive)) gameOver(true);
      break;
    }
  }

  function update(){
    paddleMove();
    if(!stuck){
      ballX+=vx; ballY+=vy;
      collideWalls(); collidePaddle(); collideBricks();
    }
  }

  function loop(){
    if(!playing) return;
    update(); draw(); requestAnimationFrame(loop);
  }

  function gameOver(win){
    playing=false;
    msg.textContent = win ? 'üéâ Î™®Îì† ÏÖÄÏùÑ ÏÇ≠Ï†úÌñàÏäµÎãàÎã§!' : 'Í≥ºÏ†ú Ïã§Ìå®... \nSpace Î°ú Ïû¨ÏãúÏûë';
  }

  // ÏûÖÎ†•
  addEventListener('keydown', e=>{
    if(e.repeat) return;
    if(e.code==='ArrowLeft') left=true;
    if(e.code==='ArrowRight') right=true;
    if(e.code==='Space'){
      if(!playing) start();
      else if(stuck) launch();
      else if(!stuck && msg.textContent) start();
    }
  });
  addEventListener('keyup', e=>{
    if(e.code==='ArrowLeft') left=false;
    if(e.code==='ArrowRight') right=false;
  });

  // Ï≤´ ÌôîÎ©¥
  initLevel(); resetBall(); draw();
})();
</script>
</body>
</html>

